import React, { Component } from "react";
import Typical from "react-typical";
import Switch from "react-switch";
import ParticleCanvas from "./ParticleCanvas"

class Header extends Component {
  titles = [];

  constructor() {
    super();
    this.state = { checked: false };
    this.onThemeSwitchChange = this.onThemeSwitchChange.bind(this);
  }

  componentDidMount() {
    this.setInitialTheme();
  }

  setInitialTheme() {
    const dataThemeAttribute = "data-theme";
    const body = document.body;
    const currentTheme = body.getAttribute(dataThemeAttribute);

    // setting dark mode as initial theme
    if (!currentTheme || currentTheme !== "dark") {
      body.setAttribute(dataThemeAttribute, "dark");
      this.setState({ checked: true });
    }
  }

  onThemeSwitchChange(checked) {
    this.setState({ checked });
    this.setTheme();
  }

  setTheme() {
    var dataThemeAttribute = "data-theme";
    var body = document.body;
    var newTheme =
      body.getAttribute(dataThemeAttribute) === "dark" ? "light" : "dark";
    body.setAttribute(dataThemeAttribute, newTheme);
  }

  render() {
    if (this.props.sharedData) {
      var name = this.props.sharedData.name;
      this.titles = this.props.sharedData.titles.map(x => [x.toUpperCase(), 1500]).flat();
    }

    const HeaderTitleTypeAnimation = React.memo(() => {
      return <Typical className="title-styles" steps={this.titles} loop={50} />
    }, (props, prevProp) => true);

    return (
      <header id="home" style={{ height: window.innerHeight - 140, display: 'block' }}>
        <div className="row aligner" style={{ height: '100%' }}>
          <ParticleCanvas />
          <div className="col-md-12">
            <div>
              {/* <span className="iconify header-icon" data-icon="pixelarticons:downasaur" data-inline="false"></span> */}
              <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="184.000000pt" height="184.000000pt" viewBox="0 0 184.000000 184.000000" preserveAspectRatio="xMidYMid meet">  <g transform="translate(0.000000,184.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="none"> <path d="M918 1779 c-10 -5 -18 -16 -18 -24 0 -8 -12 -39 -27 -70 -19 -38 -33 -55 -46 -55 -32 0 -136 -30 -194 -56 -60 -26 -70 -44 -12 -21 19 8 43 18 54 22 11 5 23 7 28 7 4 -1 7 2 7 6 0 5 6 9 13 9 6 0 26 3 44 7 26 6 34 4 42 -13 8 -14 8 -22 0 -27 -6 -3 -20 -27 -31 -51 -21 -48 -18 -57 29 -96 13 -10 39 -42 58 -72 20 -29 42 -56 50 -59 24 -9 43 33 54 119 28 221 27 217 43 226 10 7 9 9 -4 9 -20 0 -22 20 -9 85 5 29 4 44 -5 53 -16 15 -53 15 -76 1z m64 -11 c11 -28 -4 -87 -23 -93 -30 -10 -62 13 -54 38 4 12 7 30 8 39 1 9 5 14 9 12 4 -3 8 0 8 5 0 15 47 14 52 -1z m-26 -104 c24 6 26 5 20 -16 -3 -13 -6 -38 -6 -55 0 -29 -3 -33 -27 -33 -33 0 -93 34 -93 52 0 7 9 28 21 47 19 32 21 32 39 16 13 -12 27 -15 46 -11z m-24 -114 l30 0 -7 -67 c-4 -38 -9 -70 -11 -72 -8 -9 -77 12 -93 28 -15 15 -17 27 -11 60 4 22 5 41 1 41 -3 0 0 4 8 9 9 6 10 11 2 15 -6 4 -12 2 -12 -3 -1 -6 -3 -15 -4 -21 -1 -5 -3 -22 -4 -36 0 -14 -5 -22 -11 -19 -5 3 -10 0 -10 -8 0 -25 68 -77 100 -77 29 0 30 -1 30 -49 0 -60 -13 -72 -31 -29 -7 17 -39 58 -70 90 -36 36 -56 65 -52 74 3 7 9 14 14 14 5 0 9 7 9 15 0 8 7 30 17 49 l16 35 29 -24 c17 -15 42 -25 60 -25z" /> <path d="M310 1685 c-7 -8 -17 -12 -23 -8 -5 3 -8 2 -5 -3 4 -5 -9 -20 -27 -34 -38 -29 -98 -118 -119 -177 -37 -105 -25 -232 29 -315 24 -36 24 -38 8 -75 -23 -52 -22 -251 2 -318 3 -11 13 -37 20 -59 8 -21 12 -43 9 -47 -3 -5 -2 -9 3 -9 10 0 39 -62 34 -75 -1 -5 0 -7 4 -3 9 9 97 -116 109 -154 3 -11 11 -15 21 -12 14 6 13 11 -9 33 -47 49 -123 189 -156 287 -52 157 -55 391 -5 340 11 -11 13 -25 7 -58 -5 -26 -3 -65 4 -98 l11 -55 4 70 4 70 30 -41 c30 -42 75 -65 156 -79 34 -6 36 -9 64 -93 33 -102 27 -92 54 -97 25 -5 27 7 5 26 -26 22 -44 66 -50 127 l-7 59 -50 2 c-90 2 -187 71 -187 134 0 18 1 18 25 3 42 -28 40 -17 -3 14 -43 31 -66 63 -54 75 4 3 0 5 -8 3 -9 -2 -14 4 -14 14 1 10 -2 15 -7 12 -8 -5 -13 9 -10 29 0 4 -3 7 -9 7 -5 0 -6 7 -3 17 4 9 2 14 -3 11 -5 -3 -10 15 -11 40 -1 26 -8 59 -14 75 -10 23 -10 30 1 37 9 6 11 21 6 51 -5 34 -4 40 5 29 9 -13 10 -12 5 3 -14 43 96 197 166 233 44 23 65 10 83 -48 8 -29 15 -60 15 -70 0 -10 4 -18 9 -18 15 0 3 77 -19 120 -18 35 -25 40 -54 40 -18 0 -39 -7 -46 -15z m-167 -420 c4 -27 3 -35 -3 -25 -5 8 -10 28 -10 44 0 39 6 30 13 -19z" /> <path d="M491 1643 c2 -19 -10 -56 -39 -113 -13 -26 -16 -47 -11 -85 4 -27 5 -60 2 -72 -3 -12 5 -51 17 -87 25 -74 23 -115 -9 -177 -12 -21 -20 -39 -18 -39 1 0 26 9 55 20 29 11 70 20 92 20 l41 0 -23 -24 c-13 -13 -27 -21 -32 -18 -5 3 -6 0 -3 -5 4 -6 1 -28 -7 -49 -7 -22 -11 -45 -9 -51 3 -7 -1 -13 -9 -13 -8 0 -9 -3 -3 -8 6 -4 19 -25 30 -47 12 -24 35 -48 58 -61 20 -11 34 -23 31 -27 -3 -3 4 -3 17 0 19 5 21 3 15 -12 -17 -46 -18 -102 -2 -134 19 -36 70 -71 101 -70 16 1 16 2 -5 9 -22 6 -23 8 -7 15 17 7 17 8 0 21 -10 7 -22 14 -27 14 -6 0 -2 -6 9 -13 14 -11 15 -16 5 -22 -17 -10 -67 44 -76 82 -10 40 16 108 41 107 21 -1 54 26 45 36 -8 8 69 31 125 37 27 4 44 8 37 11 -6 2 -12 14 -12 27 0 12 -6 40 -14 62 l-14 40 51 7 c84 10 84 10 96 -38 6 -25 17 -51 25 -59 17 -16 100 -32 116 -22 21 13 58 14 67 2 26 -34 3 -158 -36 -195 l-26 -25 30 7 c31 7 39 15 67 65 31 55 80 53 58 -3 -8 -22 -6 -35 10 -66 21 -40 24 -67 14 -94 -8 -22 -34 -20 -34 2 0 14 -2 15 -10 2 -8 -13 -10 -12 -10 4 0 13 5 17 20 13 12 -3 20 0 20 8 0 7 -9 11 -23 8 -16 -3 -34 4 -52 19 l-28 24 -63 -22 c-35 -12 -65 -19 -69 -16 -3 3 -2 -15 1 -39 5 -39 3 -49 -22 -78 -26 -32 -27 -34 -9 -44 38 -21 65 -55 58 -74 -6 -16 -5 -16 9 -5 14 11 22 11 48 -3 34 -18 46 -13 52 20 2 15 12 21 41 23 32 3 39 0 49 -24 11 -23 10 -28 -11 -45 -27 -22 -53 -24 -84 -8 l-22 12 20 -22 c12 -14 15 -25 9 -29 -6 -4 -13 -15 -17 -25 -7 -19 -34 -33 -45 -23 -3 4 -1 16 6 26 8 14 9 26 2 42 l-11 23 5 -22 c6 -32 -15 -73 -37 -73 -10 0 -16 3 -13 8 2 4 -2 18 -10 32 l-15 25 6 -25 c6 -23 5 -23 -8 -7 -19 23 -22 22 -21 -12 0 -18 13 -44 33 -67 30 -33 33 -42 28 -81 -6 -52 -32 -84 -97 -119 -38 -21 -41 -24 -15 -19 17 3 42 15 57 25 l26 19 6 -24 c10 -39 21 -29 22 18 0 23 6 56 14 73 17 39 8 74 -30 118 -37 42 -38 49 -2 30 40 -21 70 -17 98 11 24 24 28 25 109 17 126 -12 293 7 388 43 24 10 22 -6 -23 -180 -35 -138 -41 -179 -21 -147 4 7 18 57 31 112 26 110 38 123 90 96 17 -8 30 -10 30 -6 0 13 -35 30 -60 30 -20 0 -22 4 -16 38 4 22 17 46 33 59 15 12 29 30 31 40 7 29 12 119 6 103 -3 -8 -17 -38 -31 -67 l-25 -51 -83 -21 c-162 -40 -411 -48 -423 -13 -2 7 6 12 22 12 14 0 37 11 52 24 l28 23 -20 34 -20 34 130 1 c126 1 242 14 334 36 76 19 37 20 -83 2 -86 -12 -123 -14 -140 -6 -18 8 -26 8 -35 -4 -9 -9 -32 -14 -74 -14 -35 0 -56 4 -48 8 7 5 36 7 64 6 28 -2 48 -1 44 3 -13 13 -106 10 -118 -4 -9 -11 -25 -13 -67 -8 -53 6 -55 6 -36 -10 11 -9 14 -14 7 -10 -7 3 -25 0 -41 -8 -26 -13 -30 -13 -36 0 -3 9 0 22 7 30 18 22 -6 33 -71 33 -77 0 -54 14 59 36 167 31 411 22 582 -21 23 -6 27 -4 25 13 -1 14 -7 19 -24 17 -12 -1 -20 1 -17 6 2 4 -15 8 -38 7 -24 0 -79 3 -123 8 -44 5 -119 9 -167 9 l-88 0 0 43 c0 24 -8 58 -17 74 -14 23 -15 32 -5 35 6 3 12 18 12 34 0 34 13 64 41 95 19 20 19 20 -29 33 -107 27 -171 119 -180 259 -5 92 -1 102 51 102 25 0 27 3 27 38 0 22 -6 60 -14 85 -7 25 -11 49 -7 53 3 4 0 4 -8 -1 -9 -5 -12 -3 -9 6 6 17 -1 26 -78 104 -34 34 -76 67 -93 73 -17 6 -31 10 -31 8 0 -2 21 -16 46 -32 79 -50 154 -168 179 -283 5 -23 4 -31 -4 -27 -6 4 -11 14 -11 21 0 9 -6 12 -15 9 -10 -4 -15 0 -15 14 0 11 -7 25 -15 32 -8 7 -15 22 -15 35 0 27 -44 108 -87 160 -27 32 -32 35 -30 17 1 -12 4 -22 7 -22 4 0 17 -21 30 -47 17 -34 20 -50 13 -63 -13 -20 -2 -43 36 -81 14 -14 36 -37 48 -51 21 -26 21 -27 2 -44 -38 -34 -18 -215 32 -289 25 -36 93 -85 119 -85 8 0 21 -4 29 -9 12 -8 12 -12 -1 -25 -9 -9 -18 -20 -20 -26 -2 -7 -14 -7 -35 -1 -26 8 -35 6 -42 -6 -6 -11 -10 -12 -16 -4 -9 15 4 69 13 55 8 -10 32 -17 32 -9 0 8 -80 78 -104 90 -17 9 -20 18 -18 54 2 29 0 41 -7 37 -7 -4 -8 -1 -5 8 3 9 1 16 -5 16 -6 0 -11 9 -11 20 0 11 -5 20 -11 20 -5 0 -8 4 -5 8 7 12 -29 69 -57 86 -21 14 -28 14 -78 -4 -48 -17 -50 -19 -22 -20 30 0 31 -1 22 -27 -5 -16 -11 -44 -14 -64 -4 -27 -11 -38 -28 -43 -48 -13 -73 -6 -115 33 -23 22 -56 42 -73 46 -36 8 -28 21 16 28 29 4 29 4 -5 6 -19 0 -49 -3 -67 -8 -24 -7 -33 -6 -37 5 -9 24 5 46 26 41 12 -4 18 -1 15 6 -2 7 -16 50 -31 97 -31 102 -49 134 -44 78 2 -21 0 -38 -4 -38 -4 0 -8 -5 -8 -11 0 -6 9 -9 20 -6 23 6 25 3 7 -15 -9 -8 -12 -28 -9 -51 4 -32 8 -38 23 -34 11 3 19 1 19 -5 0 -5 -9 -12 -20 -15 -15 -4 -18 -11 -14 -32 3 -14 1 -37 -3 -49 -7 -18 -12 1 -22 84 -13 111 -16 124 -31 124 -9 0 -7 -32 10 -124 12 -66 7 -76 -42 -76 -38 0 -40 10 -18 68 20 52 20 52 0 52 -16 0 -19 -5 -14 -29 5 -23 2 -32 -15 -40 -12 -7 -21 -22 -21 -36 0 -14 -9 -29 -21 -35 -27 -15 -32 -9 -19 24 16 42 12 110 -9 163 -14 36 -16 54 -9 73 5 14 7 46 4 71 -7 49 26 179 45 179 5 0 19 -16 31 -35 11 -20 22 -34 25 -32 10 11 -26 74 -51 91 -26 17 -27 17 -25 -1z m685 -242 c-10 -16 -23 -14 -30 5 -9 25 4 38 21 21 9 -8 12 -20 9 -26z m-59 -291 c30 -89 30 -125 -3 -155 -30 -28 -27 -31 11 -13 20 9 25 19 26 52 l1 41 12 -37 c6 -20 14 -40 19 -44 21 -21 5 -34 -41 -34 -79 0 -90 17 -99 157 -6 87 -1 105 29 101 18 -2 28 -16 45 -68z m-319 -12 c53 -40 95 -110 105 -175 5 -31 4 -33 -26 -33 -18 -1 -50 -7 -72 -15 -30 -11 -41 -11 -47 -2 -12 18 -5 29 29 47 l31 16 -30 12 c-22 8 -29 16 -24 27 3 9 2 13 -3 10 -15 -8 -20 8 -10 32 4 13 23 29 41 37 26 11 28 15 12 15 -11 1 -31 -10 -44 -24 -28 -30 -40 -128 -20 -165 11 -21 10 -26 -10 -42 -25 -20 -57 -16 -106 13 -75 45 -72 174 5 243 23 21 27 15 10 -16 -10 -18 -9 -20 6 -15 9 4 28 7 41 7 19 0 26 6 30 29 6 27 8 28 36 20 16 -4 37 -14 46 -21z m469 -478 c15 -29 14 -30 -34 -41 -21 -4 -50 -11 -64 -14 -23 -6 -26 -4 -25 21 1 28 9 34 61 52 39 13 48 10 62 -18z m-84 -137 c21 -4 25 -8 15 -14 -7 -5 -8 -9 -2 -9 23 0 9 -26 -16 -28 -19 -2 -30 5 -40 23 -7 14 -17 25 -22 25 -5 0 -6 5 -3 11 4 6 14 7 24 4 9 -4 29 -9 44 -12z m47 -73 c0 -5 -6 -10 -14 -10 -8 0 -18 5 -21 10 -3 6 3 10 14 10 12 0 21 -4 21 -10z" /> <path d="M1050 1112 c0 -6 11 -17 25 -26 29 -19 32 -51 8 -79 -17 -18 -17 -19 12 -15 26 3 30 6 27 32 -2 16 -10 39 -19 53 -17 26 -53 50 -53 35z" /> <path d="M830 943 c0 -5 5 -15 10 -23 8 -12 10 -11 10 8 0 12 -4 22 -10 22 -5 0 -10 -3 -10 -7z" /> <path d="M244 1404 c-12 -49 2 -167 26 -214 26 -53 64 -96 101 -115 21 -12 26 -12 26 0 0 7 -5 11 -11 9 -17 -7 -84 69 -109 123 -17 38 -22 67 -22 136 0 48 -1 87 -2 87 -2 0 -6 -12 -9 -26z" /> <path d="M391 1316 c-6 -24 -14 -52 -17 -62 -6 -18 -6 -18 11 -2 16 15 35 108 22 108 -2 0 -10 -20 -16 -44z" /> <path d="M920 1164 l-35 -13 38 0 c26 -1 37 3 37 14 0 8 -1 14 -2 14 -2 -1 -19 -7 -38 -15z" /> <path d="M1106 855 c10 -8 24 -14 29 -14 6 0 1 6 -9 14 -11 8 -24 15 -30 15 -5 0 -1 -7 10 -15z" /> <path d="M205 837 c3 -10 5 -22 5 -26 0 -4 11 -20 24 -36 l24 -28 -12 49 c-8 38 -12 43 -15 24 l-3 -25 -14 30 c-8 17 -12 22 -9 12z" /> <path d="M970 798 c0 -4 10 -23 21 -43 17 -28 20 -45 15 -78 -4 -30 -3 -38 4 -27 5 8 10 22 10 31 0 14 6 15 38 7 27 -6 48 -5 77 5 40 14 40 14 -32 9 l-72 -5 -14 34 c-15 35 -46 79 -47 67z" /> <path d="M270 746 c0 -12 83 -57 98 -54 11 3 -1 13 -33 27 -27 13 -53 25 -57 28 -5 2 -8 2 -8 -1z" /> <path d="M1316 711 c-5 -8 0 -21 14 -35 21 -20 22 -20 12 -1 -5 11 -11 27 -14 35 -3 11 -6 11 -12 1z" /> <path d="M260 677 c0 -8 50 -99 62 -112 5 -5 -1 13 -13 40 -19 46 -49 89 -49 72z" /> <path d="M508 654 c6 -10 22 -30 37 -44 15 -14 46 -50 68 -80 44 -58 43 -53 36 -180 -1 -19 -8 -41 -16 -48 -7 -7 -13 -10 -13 -5 0 4 -4 4 -8 -2 -14 -20 -70 -45 -86 -39 -9 3 -14 10 -11 14 3 4 -3 14 -11 21 -15 12 -16 10 -9 -21 8 -37 22 -60 36 -60 5 0 29 16 54 35 25 19 64 40 85 46 22 7 40 13 40 15 0 1 -15 17 -32 36 -31 31 -32 33 -11 36 18 3 21 8 17 39 -8 61 -94 190 -156 234 -27 20 -29 20 -20 3z" /> <path d="M1055 601 c-3 -6 -11 -9 -16 -6 -5 4 -9 2 -9 -3 0 -9 -90 -32 -136 -35 -20 -1 -21 -3 -9 -47 21 -78 39 -120 51 -120 7 0 16 -9 19 -20 9 -27 50 -68 73 -72 9 -2 23 -9 30 -16 16 -15 32 -16 32 -2 0 12 -59 50 -78 50 -7 0 -20 6 -27 14 -15 15 -2 36 23 36 8 0 35 7 61 16 l46 17 -35 38 c-38 41 -52 44 -26 4 16 -24 12 -53 -6 -54 -5 -1 -9 -1 -10 -2 -2 0 -13 -2 -25 -5 -12 -2 -28 -5 -34 -6 -30 -7 -85 120 -62 143 19 19 147 34 136 16 -4 -7 -9 -20 -10 -31 -6 -35 26 3 33 41 7 35 -7 65 -21 44z" /> <path d="M721 406 c2 -2 31 -6 64 -9 39 -4 50 -3 30 2 -31 9 -102 14 -94 7z" /> <path d="M1170 370 c-1 -14 -2 -28 -1 -32 2 -13 -11 -9 -33 9 -12 10 -9 4 6 -12 33 -35 41 -30 35 21 -2 27 -5 31 -7 14z" /> <path d="M799 316 c-96 -25 -247 -137 -309 -227 -21 -31 -19 -30 23 11 l47 44 1 -34 c1 -33 2 -33 10 10 9 50 41 83 136 141 73 43 144 61 218 55 40 -4 53 -2 40 4 -29 12 -112 11 -166 -4z" /> <path d="M448 273 c-23 -26 -48 -79 -47 -100 0 -16 1 -16 8 2 8 20 8 20 14 0 4 -15 5 -14 4 5 -2 14 7 44 19 68 25 46 25 51 2 25z" /> <path d="M1650 278 c-15 -6 -101 -11 -206 -12 -100 -1 -180 -4 -178 -7 9 -15 277 -27 334 -15 14 3 37 8 53 12 15 3 27 12 27 20 0 8 -1 14 -2 13 -2 0 -14 -5 -28 -11z" /> <path d="M1672 169 c-6 -34 -10 -65 -8 -67 6 -5 28 107 24 120 -2 6 -9 -18 -16 -53z" /> <path d="M1818 165 c-3 -3 -1 -24 4 -45 9 -33 7 -46 -10 -80 -18 -37 -18 -40 -2 -40 24 0 30 20 30 101 0 62 -6 80 -22 64z" /> <path d="M1750 143 c0 -12 -4 -24 -9 -27 -14 -9 -22 -85 -12 -104 9 -14 10 -13 11 9 0 14 6 46 14 71 8 27 10 52 5 59 -6 10 -9 8 -9 -8z" /> </g> </svg>
              <br />
              <h1 className="mb-0">
                <Typical steps={[name]} wrapper="p" />
              </h1>
              <div className="title-container">
                <HeaderTitleTypeAnimation />
              </div>
              <Switch
                checked={this.state.checked}
                onChange={this.onThemeSwitchChange}
                offColor="#baaa80"
                onColor="#353535"
                className="react-switch mx-auto"
                width={90}
                height={40}
                uncheckedIcon={
                  <span
                    className="iconify"
                    data-icon="twemoji:owl"
                    data-inline="false"
                    style={{
                      display: "block",
                      height: "100%",
                      fontSize: 25,
                      textAlign: "end",
                      marginLeft: "20px",
                      color: "#353239",
                    }}
                  ></span>
                }
                checkedIcon={
                  <span
                    className="iconify"
                    data-icon="pixelarticons:sun"
                    data-inline="false"
                    style={{
                      display: "block",
                      height: "100%",
                      fontSize: 25,
                      textAlign: "end",
                      marginLeft: "10px",
                      color: "white",
                    }}
                  ></span>
                }
                id="icon-switch"
              />
            </div>
          </div>
        </div>
      </header>
    );
  }
}

export default Header;
